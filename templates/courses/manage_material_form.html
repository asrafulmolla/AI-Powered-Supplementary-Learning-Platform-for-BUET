{% extends "base.html" %}

{% block content %}
<div style="padding: 2rem; max-width: 800px; margin: 0 auto;">
    <div style="margin-bottom: 3rem;">
        <a href="{% url 'manage-materials' %}"
            style="text-decoration: none; color: var(--text-muted); font-weight: 600; display: flex; align-items: center; gap: 6px; margin-bottom: 1rem;">
            <i class="ri-arrow-left-line"></i> Back to Management
        </a>
        <h1 style="font-size: 2.5rem; font-weight: 800; color: var(--primary);">
            {% if form.instance.pk %}Edit Material{% else %}Upload New Material{% endif %}
        </h1>
        <p style="color: var(--text-muted);">Fill in the details below to publish your course material.</p>
    </div>

    <div class="card" style="padding: 3rem; border-radius: 24px; box-shadow: 0 20px 40px rgba(0,0,0,0.05);">
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}

            {% for field in form %}
            <div style="margin-bottom: 1.5rem;">
                <label
                    style="display: block; font-size: 0.85rem; font-weight: 700; color: #475569; margin-bottom: 0.5rem;">
                    {{ field.label }}
                </label>
                {{ field }}
                {% if field.help_text %}
                <div style="font-size: 0.75rem; color: var(--text-muted); margin-top: 0.25rem;">{{ field.help_text }}
                </div>
                {% endif %}
                {% if field.errors %}
                <div style="color: #dc2626; font-size: 0.8rem; margin-top: 0.25rem;">{{ field.errors }}</div>
                {% endif %}
            </div>
            {% endfor %}

            <div style="margin-top: 3rem; display: flex; gap: 1rem;">
                <button type="submit" class="btn-primary"
                    style="flex: 2; padding: 1.2rem; border-radius: 14px; font-size: 1.1rem; border: none; box-shadow: 0 10px 20px rgba(116, 30, 30, 0.2);">
                    {% if form.instance.pk %}<i class="ri-save-line"></i> Save Changes{% else %}<i
                        class="ri-upload-cloud-2-line"></i> Publish Material{% endif %}
                </button>
                <a href="{% url 'manage-materials' %}"
                    style="flex: 1; text-decoration: none; display: flex; align-items: center; justify-content: center; padding: 1.2rem; border-radius: 14px; border: 2px solid #f1f5f9; color: #475569; font-weight: 700;">
                    Cancel
                </a>
            </div>
        </form>
    </div>
</div>

<style>
    /* Styling for the form inputs since they were injected with classes in forms.py */
    select.search-input {
        appearance: none;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2364748b'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right 1rem center;
        background-size: 1.2rem;
        padding-right: 3rem !important;
    }

    .search-input:focus {
        border-color: var(--primary) !important;
        background: white !important;
        box-shadow: 0 0 0 4px rgba(116, 30, 30, 0.1);
    }
</style>
{% endblock %}